//   New schema
doctype html

mixin form_field(name, label, icon, tip, pattern, maxLength)
  .form-group
    label.col-xs-12.col-sm-3.control-label.no-padding-right(for="schema_#{name}") #{label}
    .col-xs-12.col-sm-5
      span.block.input-icon.input-icon-right
        input.form-control(id="schema_#{name}", name="schema.#{name}", ng-model="schema.#{name}", required,  ng-maxlength="#{maxLength}", type="text", placeholder="#{label}", ng-pattern="#{pattern}")
        i(class="icon-#{icon}")
    .help-block.col-xs-12.col-sm-reset.inline #{tip}
mixin selector(name, label, datas, tip)
  .form-group
    label.col-xs-12.col-sm-3.control-label.no-padding-right(for="schema_#{name}") #{label}
    .col-xs-12.col-sm-5
      select.form-control(ng-model="schema.#{name}", required)
        option(ng-repeat="data in #{datas}", value="{{data.id}}") {{data.name}}
    .help-block.col-xs-12.col-sm-reset.inline #{tip}
.row(ng-controller="schemaNewCtrl")
  form.form-horizontal(name="newSchemaForm", novalidate="novalidate", ng-model-options="{ updateOn: 'mousedown blur' }", role="form")
    .col-md-offset-2.col-md-8
      .widget-box
        .widget-header
          h4 Schema信息
        .widget-body
          +selector("hostId", "数据库主机", "hosts", "")
          +form_field("name", "Schema名称", "star", "", "", "20")
          +form_field("description", "Schema描述", "star", "", "", "20")
    .col-md-offset-2.col-md-8
      .widget-box
        .widget-header
          h4 配置信息
        .widget-body
          +form_field("configuration.user", "数据库用户名", "star", "", "", "20")
          +form_field("configuration.password", "数据库用户密码", "star", "", "", "20")

    .row-fluid.actions
      .col-xs-12.col-sm-3
      .col-xs-12.col-sm-5
        button.btn.btn-sm.btn-primary(ng-click="createSchema()")
          i.icon-ok
          | 创建Schema
        button.btn.btn-sm.btn-link(ui-sref="schemas")
          i.icon-remove
          | 取消
.row
  pre.container-fluid
    | {{schema}}