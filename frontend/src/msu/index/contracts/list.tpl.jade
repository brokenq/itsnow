include /lib/mixins/list

.datalist
  +toolbar
    +button_group
      +tool_button("contractsTable.reload()", "refresh", "", "*", "", "")
    +button_group
      +tool_button("actionService.gotoState('contracts.new', $event)", "plus", "新增", "*", "", "")
      +tool_button("actionService.perform(approve, $event)", "ok", "批准", "1+", "", "executeEnable")
      +tool_button("actionService.perform(reject, $event)", "remove", "拒绝", "1+", "", "executeEnable")
      //+tool_button("actionService.gotoState('contracts.edit', $event)", "cog", "操作", "1", "", "enable")//Purposed

  +page_table("contractsTable","selectionService")
    +row("contract", "sn", "selectionService")(ng-class="{'enable':contract.status=='Approved','executeEnable':contract.status=='Purposed'}")
      td(data-title="'名称'")
        a(ui-sref="contracts.view(contract)") {{contract.sn}}
      td(data-title="'状态'") {{contract.status | formatContractStatus}}
      td(data-title="'服务商'")
        a(ui-sref="contracts.accounts_view(contract)") {{contract.mspAccount.name || '无'}}
      td(data-title="'创建时间'") {{contract.createdAt | formatTime}}
      td(data-title="'更新时间'") {{contract.updatedAt | formatTime}}