include /lib/mixins/list

.datalist
  +toolbar
    +button_group
      +tool_button("contractsTable.reload()", "refresh", "", "*", "", "")

  +page_table("contractsTable","selectionService")
    +row("contract", "sn", "selectionService")
      td(data-title="'合同号'")
        a(ui-sref="contracts.view(contract)") {{contract.sn}}
      td(data-title="'企业帐户'")
        a(ui-sref="contracts.msu_accounts_view(contract)") {{contract.msuAccount.name}}
      td(data-title="'服务商'")
        span(ng-repeat="mspAccount in contract.mspAccounts")
          span(ng-if="mspAccount.contractStatus=='' || mspAccount.contractStatus==null")
            a(ui-sref="contracts.msp_accounts_view({sn:contract.sn,account_sn:mspAccount.sn})") {{mspAccount.name}}
            span(ng-if="!$last") ,&nbsp;
          span(ng-if="mspAccount.contractStatus=='Approved'")
            a(ui-sref="contracts.msp_accounts_view({sn:contract.sn,account_sn:mspAccount.sn})") {{mspAccount.name}}
      //td(data-title="'服务商'")
      //  a(ui-sref="contracts.msp_accounts_view(contract)") {{contract.mspAccount.name}}
      td(data-title="'状态'") {{contract.status | formatContractStatus}}
      td(data-title="'创建时间'") {{contract.createdAt | formatTime}}
      td(data-title="'更新时间'") {{contract.updatedAt | formatTime}}